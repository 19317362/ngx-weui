<span class="hljs-keyword">import</span> { Observable, Subscriber } <span class="hljs-keyword">from</span> <span class="hljs-string">'rxjs/Rx'</span>;
<span class="hljs-keyword">import</span> { Component, ViewEncapsulation, OnDestroy } <span class="hljs-keyword">from</span> <span class="hljs-string">'@angular/core'</span>;
<span class="hljs-keyword">import</span> { PickerData, PickerOptions, PickerService } <span class="hljs-keyword">from</span> <span class="hljs-string">'ngx-weui/picker'</span>
<span class="hljs-keyword">import</span> { DATA } <span class="hljs-keyword">from</span> <span class="hljs-string">'./cn'</span>

<span class="hljs-meta">@Component</span>({
    selector: <span class="hljs-string">'example-picker'</span>,
    templateUrl: <span class="hljs-string">'./picker.component.html'</span>,
    styleUrls: [<span class="hljs-string">'./picker.component.scss'</span>],
    encapsulation: ViewEncapsulation.None
})
<span class="hljs-keyword">export</span> <span class="hljs-keyword">class</span> DemoPickerComponent {
    DT: <span class="hljs-built_in">any</span> = {
        min: <span class="hljs-keyword">new</span> <span class="hljs-built_in">Date</span>(<span class="hljs-number">2015</span>, <span class="hljs-number">1</span>, <span class="hljs-number">5</span>),
        max: <span class="hljs-keyword">new</span> <span class="hljs-built_in">Date</span>()
    };
    res: <span class="hljs-built_in">any</span> = {
        city: <span class="hljs-string">'310105'</span>,
        date: <span class="hljs-keyword">new</span> <span class="hljs-built_in">Date</span>()
    };

    <span class="hljs-keyword">constructor</span>(<span class="hljs-params"><span class="hljs-keyword">private</span> srv: PickerService</span>) {}

    cityChange(item: <span class="hljs-built_in">any</span>) {
        <span class="hljs-built_in">console</span>.log(item);
    }

    onSave() {
        alert(<span class="hljs-string">'请求数据：'</span> + <span class="hljs-built_in">JSON</span>.stringify(<span class="hljs-keyword">this</span>.res));
        <span class="hljs-keyword">return</span> <span class="hljs-literal">false</span>;
    }

    cityStatus: <span class="hljs-built_in">boolean</span> = <span class="hljs-literal">false</span>;
    cityOptions: <span class="hljs-built_in">any</span> = {

    };
    cityData: <span class="hljs-built_in">any</span> = DATA;

    onCityChange(data: <span class="hljs-built_in">any</span>) {
        <span class="hljs-built_in">console</span>.log(<span class="hljs-string">'onCityChange'</span>, data);
    }
    onCityGroupChange(data: <span class="hljs-built_in">any</span>) {
        <span class="hljs-built_in">console</span>.log(<span class="hljs-string">'onCityGroupChange'</span>, data);
    }
    onCityCancel() {
        <span class="hljs-built_in">console</span>.log(<span class="hljs-string">'onCityCancel'</span>);
    }

    items: <span class="hljs-built_in">string</span>[] = <span class="hljs-built_in">Array</span>(<span class="hljs-number">6</span>).fill(<span class="hljs-string">''</span>).map(<span class="hljs-function">(<span class="hljs-params">v: <span class="hljs-built_in">string</span>, idx: <span class="hljs-built_in">number</span></span>) =&gt;</span> <span class="hljs-string">`Item<span class="hljs-subst">${idx}</span>`</span>);
    itemGroup: <span class="hljs-built_in">any</span> = [
        [
            {
                label: <span class="hljs-string">'Item1'</span>,
                value: <span class="hljs-number">1</span>
            },
            {
                label: <span class="hljs-string">'Item2 (Disabled)'</span>,
                disabled: <span class="hljs-literal">true</span>,
                value: <span class="hljs-number">2</span>
            },
            {
                label: <span class="hljs-string">'Item3'</span>,
                value: <span class="hljs-number">3</span>
            },
            {
                label: <span class="hljs-string">'Item4'</span>,
                value: <span class="hljs-number">4</span>
            },
            {
                label: <span class="hljs-string">'Item5'</span>,
                value: <span class="hljs-number">5</span>
            }
        ]
    ];
    onItemChange(data: <span class="hljs-built_in">any</span>) {
        <span class="hljs-built_in">console</span>.log(<span class="hljs-string">'onItemChange'</span>, data);
    }
    onItemGroupChange(data: <span class="hljs-built_in">any</span>) {
        <span class="hljs-built_in">console</span>.log(<span class="hljs-string">'onItemGroupChange'</span>, data);
    }
    onItemCancel() {
        <span class="hljs-built_in">console</span>.log(<span class="hljs-string">'onItemCancel'</span>);
    }

    mData: <span class="hljs-built_in">any</span>;

    onMItemChange(data: <span class="hljs-built_in">any</span>) {
        <span class="hljs-built_in">console</span>.log(<span class="hljs-string">'onMItemChange'</span>, data);
    }
    onMItemGroupChange(data: <span class="hljs-built_in">any</span>) {
        <span class="hljs-built_in">console</span>.log(<span class="hljs-string">'onMItemGroupChange'</span>, data);
    }
    onMItemCancel() {
        <span class="hljs-built_in">console</span>.log(<span class="hljs-string">'onMItemCancel'</span>);
    }

    srvRes: <span class="hljs-built_in">any</span> = <span class="hljs-string">''</span>;
    onShowBySrv(<span class="hljs-keyword">type</span>: <span class="hljs-built_in">string</span>) {
        <span class="hljs-keyword">switch</span> (<span class="hljs-keyword">type</span>) {
            <span class="hljs-keyword">case</span> <span class="hljs-string">'city'</span>:
                <span class="hljs-keyword">this</span>.srv.showCity(<span class="hljs-keyword">this</span>.cityData).subscribe(<span class="hljs-function">(<span class="hljs-params">res:<span class="hljs-built_in">any</span></span>) =&gt;</span> {
                    <span class="hljs-keyword">this</span>.srvRes = res.value;
                });
                <span class="hljs-keyword">break</span>;
            <span class="hljs-keyword">case</span> <span class="hljs-string">'date'</span>:
                <span class="hljs-keyword">this</span>.srv.showDateTime(<span class="hljs-keyword">type</span>).subscribe(<span class="hljs-function">(<span class="hljs-params">res:<span class="hljs-built_in">any</span></span>) =&gt;</span> {
                    <span class="hljs-keyword">this</span>.srvRes = res.value;
                });
                <span class="hljs-keyword">break</span>;
            <span class="hljs-keyword">case</span> <span class="hljs-string">'datetime'</span>:
                <span class="hljs-keyword">this</span>.srv.showDateTime(<span class="hljs-keyword">type</span>).subscribe(<span class="hljs-function">(<span class="hljs-params">res:<span class="hljs-built_in">any</span></span>) =&gt;</span> {
                    <span class="hljs-keyword">this</span>.srvRes = res.value;
                });
                <span class="hljs-keyword">break</span>;
            <span class="hljs-keyword">case</span> <span class="hljs-string">'time'</span>:
                <span class="hljs-keyword">this</span>.srv.showDateTime(<span class="hljs-keyword">type</span>).subscribe(<span class="hljs-function">(<span class="hljs-params">res:<span class="hljs-built_in">any</span></span>) =&gt;</span> {
                    <span class="hljs-keyword">this</span>.srvRes = res.value;
                });
                <span class="hljs-keyword">break</span>;
            <span class="hljs-keyword">case</span> <span class="hljs-string">'data'</span>:
                <span class="hljs-keyword">this</span>.srv.show(<span class="hljs-keyword">this</span>.items, <span class="hljs-string">'Item3'</span>).subscribe(<span class="hljs-function">(<span class="hljs-params">res:<span class="hljs-built_in">any</span></span>) =&gt;</span> {
                    <span class="hljs-keyword">this</span>.srvRes = res.value;
                });
                <span class="hljs-keyword">break</span>;
        }
    }

    ngOnDestroy() {
        <span class="hljs-keyword">this</span>.srv.destroyAll();
    }
}
