<span class="hljs-keyword">import</span> { Observable, Subscription } <span class="hljs-keyword">from</span> <span class="hljs-string">'rxjs/Rx'</span>;
<span class="hljs-keyword">import</span> { Component, ViewEncapsulation, OnDestroy } <span class="hljs-keyword">from</span> <span class="hljs-string">'@angular/core'</span>;

<span class="hljs-keyword">import</span> { PTRComponent } <span class="hljs-keyword">from</span> <span class="hljs-string">'ngx-weui/ptr'</span>;

<span class="hljs-meta">@Component</span>({
    selector: <span class="hljs-string">'example-ptr'</span>,
    templateUrl: <span class="hljs-string">'./ptr.component.html'</span>,
    styleUrls: [<span class="hljs-string">'./ptr.component.scss'</span>],
    encapsulation: ViewEncapsulation.None
})
<span class="hljs-keyword">export</span> <span class="hljs-keyword">class</span> DemoPTRComponent {

    items: <span class="hljs-built_in">any</span>[] = [];
    onRefresh(ptr: PTRComponent) {
        Observable.timer(<span class="hljs-number">800</span>).subscribe(<span class="hljs-function"><span class="hljs-params">()</span> =&gt;</span> {
            <span class="hljs-keyword">this</span>.genData();
            ptr.setFinished(<span class="hljs-string">'上次刷新：'</span> + <span class="hljs-keyword">new</span> <span class="hljs-built_in">Date</span>().getTime());
        });
    }

    ngOnInit() {
        <span class="hljs-keyword">this</span>.genData();
    }

    <span class="hljs-keyword">private</span> genData() {
        <span class="hljs-keyword">this</span>.items = <span class="hljs-built_in">Array</span>(<span class="hljs-number">6</span>).fill({}).map(<span class="hljs-function">(<span class="hljs-params">v: <span class="hljs-built_in">any</span>, idx: <span class="hljs-built_in">number</span></span>) =&gt;</span> {
            <span class="hljs-keyword">return</span> <span class="hljs-string">`<span class="hljs-subst">${idx}</span>:<span class="hljs-subst">${Math.random()}</span>`</span>;
        });
    }

}
