<span class="hljs-keyword">import</span> { Component, ViewEncapsulation } <span class="hljs-keyword">from</span> <span class="hljs-string">'@angular/core'</span>;

<span class="hljs-keyword">import</span> { NotifyService } <span class="hljs-keyword">from</span> <span class="hljs-string">'ngx-notify'</span>;
<span class="hljs-keyword">import</span> { ERR } <span class="hljs-keyword">from</span> <span class="hljs-string">'ngx-gesture-password'</span>;

<span class="hljs-meta">@Component</span>({
    selector: <span class="hljs-string">'example-gesture-password'</span>,
    templateUrl: <span class="hljs-string">'./gesture-password.component.html'</span>,
    styleUrls: [<span class="hljs-string">'./gesture-password.component.scss'</span>],
    encapsulation: ViewEncapsulation.None
})
<span class="hljs-keyword">export</span> <span class="hljs-keyword">class</span> GesturePasswordComponent {

    pwd: <span class="hljs-built_in">string</span> = <span class="hljs-string">'1236'</span>;
    <span class="hljs-keyword">type</span>: <span class="hljs-built_in">string</span> = <span class="hljs-string">'check'</span>;
    options: <span class="hljs-built_in">any</span>;
    switchState: <span class="hljs-built_in">boolean</span> = <span class="hljs-literal">true</span>;

    <span class="hljs-keyword">constructor</span>(<span class="hljs-params"><span class="hljs-keyword">private</span> _ns: NotifyService</span>) { }

    onChangeOptions() {
        <span class="hljs-keyword">if</span> (<span class="hljs-keyword">this</span>.options) {
            <span class="hljs-keyword">this</span>.options = <span class="hljs-literal">null</span>;
        } <span class="hljs-keyword">else</span> {
            <span class="hljs-keyword">this</span>.options = {
                bgColor: <span class="hljs-string">'#292b38'</span>,
                focusColor: <span class="hljs-string">'#5aa5fe'</span>,
                fgColor: <span class="hljs-string">'#878aa1'</span>,
                num: <span class="hljs-number">4</span>,
                passwords: <span class="hljs-built_in">Array</span>(<span class="hljs-number">16</span>).fill(<span class="hljs-number">0</span>).map(<span class="hljs-function">(<span class="hljs-params">i, index</span>) =&gt;</span> <span class="hljs-built_in">String</span>.fromCharCode(index + <span class="hljs-number">65</span>))
            };
        }
    }

    onError(data: <span class="hljs-built_in">any</span>) {
        <span class="hljs-built_in">console</span>.log(<span class="hljs-string">'error'</span>, data);
    }

    onChecked(data: <span class="hljs-built_in">any</span>) {
        <span class="hljs-built_in">console</span>.log(<span class="hljs-string">'onChecked'</span>, data);
        <span class="hljs-keyword">switch</span> (data.err) {
            <span class="hljs-keyword">case</span> ERR.NOT_ENOUGH_POINTS:
                <span class="hljs-keyword">this</span>._ns.info(<span class="hljs-string">'至少4个节点以上'</span>);
                <span class="hljs-keyword">break</span>;
            <span class="hljs-keyword">case</span> ERR.PASSWORD_MISMATCH:
                <span class="hljs-keyword">this</span>._ns.error(<span class="hljs-string">'PASSWORD MISMATCH'</span>);
                <span class="hljs-keyword">break</span>;
            <span class="hljs-keyword">default</span>:
                <span class="hljs-keyword">this</span>._ns.success(<span class="hljs-string">'SUCCESS'</span>);
                <span class="hljs-keyword">break</span>;
        }
    }

    onBeforeRepeat(data: <span class="hljs-built_in">any</span>) {
        <span class="hljs-built_in">console</span>.log(<span class="hljs-string">'onBeforeRepeat'</span>, data);
        <span class="hljs-keyword">switch</span> (data.err) {
            <span class="hljs-keyword">case</span> ERR.NOT_ENOUGH_POINTS:
                <span class="hljs-keyword">this</span>._ns.info(<span class="hljs-string">'至少4个节点以上'</span>);
                <span class="hljs-keyword">break</span>;
            <span class="hljs-keyword">default</span>:
                <span class="hljs-keyword">this</span>._ns.info(<span class="hljs-string">'请再次绘制相同图案'</span>);
                <span class="hljs-keyword">break</span>;
        }
    }

    onAfterRepeat(data: <span class="hljs-built_in">any</span>) {
        <span class="hljs-built_in">console</span>.log(<span class="hljs-string">'onAfterRepeat'</span>, data);
        <span class="hljs-keyword">switch</span> (data.err) {
            <span class="hljs-keyword">case</span> ERR.NOT_ENOUGH_POINTS:
                <span class="hljs-keyword">this</span>._ns.info(<span class="hljs-string">'至少4个节点以上'</span>);
                <span class="hljs-keyword">break</span>;
            <span class="hljs-keyword">case</span> ERR.PASSWORD_MISMATCH:
                <span class="hljs-keyword">this</span>._ns.error(<span class="hljs-string">'两次密码不匹配'</span>);
                <span class="hljs-keyword">break</span>;
            <span class="hljs-keyword">default</span>:
                <span class="hljs-keyword">this</span>._ns.success(<span class="hljs-string">'新密码已经生效'</span>);
                <span class="hljs-keyword">break</span>;
        }
    }
}
