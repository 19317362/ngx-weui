<span class="hljs-keyword">import</span> { Component, ViewEncapsulation } <span class="hljs-keyword">from</span> <span class="hljs-string">'@angular/core'</span>;
<span class="hljs-keyword">import</span> { InfiniteLoaderComponent } <span class="hljs-keyword">from</span> <span class="hljs-string">'ngx-weui/infiniteloader'</span>;
<span class="hljs-keyword">import</span> { Observable } <span class="hljs-keyword">from</span> <span class="hljs-string">'rxjs/Observable'</span>;
<span class="hljs-keyword">import</span> <span class="hljs-string">'rxjs/add/observable/timer'</span>;

<span class="hljs-meta">@Component</span>({
    selector: <span class="hljs-string">'example-tabbar'</span>,
    templateUrl: <span class="hljs-string">'./tabbar.component.html'</span>,
    styleUrls: [<span class="hljs-string">'./tabbar.component.scss'</span>],
    encapsulation: ViewEncapsulation.None
})
<span class="hljs-keyword">export</span> <span class="hljs-keyword">class</span> DemoTabbarComponent {
    time: <span class="hljs-built_in">number</span>;
    onSelect() {
        <span class="hljs-keyword">this</span>.time = <span class="hljs-keyword">new</span> <span class="hljs-built_in">Date</span>().getTime();
    }

    items: <span class="hljs-built_in">any</span>[] = <span class="hljs-built_in">Array</span>(<span class="hljs-number">20</span>).fill(<span class="hljs-number">0</span>).map(<span class="hljs-function">(<span class="hljs-params">v: <span class="hljs-built_in">any</span>, i: <span class="hljs-built_in">number</span></span>) =&gt;</span> i);
    onLoadMore(comp: InfiniteLoaderComponent) {
        Observable.timer(<span class="hljs-number">1500</span>).subscribe(<span class="hljs-function"><span class="hljs-params">()</span> =&gt;</span> {

            <span class="hljs-keyword">this</span>.items.push(...Array(<span class="hljs-number">10</span>).fill(<span class="hljs-keyword">this</span>.items.length).map(<span class="hljs-function">(<span class="hljs-params">v, i</span>) =&gt;</span> v + i));

            <span class="hljs-keyword">if</span> (<span class="hljs-keyword">this</span>.items.length &gt;= <span class="hljs-number">50</span>) {
                comp.setFinished();
                <span class="hljs-keyword">return</span>;
            }
            comp.resolveLoading();
        });
    }
}
