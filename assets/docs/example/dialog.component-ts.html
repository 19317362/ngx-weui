<span class="hljs-keyword">import</span> { Component, ViewEncapsulation, ViewChild } <span class="hljs-keyword">from</span> <span class="hljs-string">'@angular/core'</span>;
<span class="hljs-keyword">import</span> { Observable } <span class="hljs-keyword">from</span> <span class="hljs-string">'rxjs/Rx'</span>;

<span class="hljs-keyword">import</span> { SkinType } <span class="hljs-keyword">from</span> <span class="hljs-string">'ngx-weui'</span>;
<span class="hljs-keyword">import</span> { DialogService, DialogConfig, DialogComponent } <span class="hljs-keyword">from</span> <span class="hljs-string">"ngx-weui/dialog"</span>;

<span class="hljs-meta">@Component</span>({
    selector: <span class="hljs-string">'example-dialog'</span>,
    templateUrl: <span class="hljs-string">'./dialog.component.html'</span>,
    styleUrls: [<span class="hljs-string">'./dialog.component.scss'</span>],
    encapsulation: ViewEncapsulation.None
})
<span class="hljs-keyword">export</span> <span class="hljs-keyword">class</span> DemoDialogComponent {

    <span class="hljs-meta">@ViewChild</span>(<span class="hljs-string">'ios'</span>) iosAS: DialogComponent;
    <span class="hljs-meta">@ViewChild</span>(<span class="hljs-string">'android'</span>) androidAS: DialogComponent;
    <span class="hljs-meta">@ViewChild</span>(<span class="hljs-string">'auto'</span>) autoAS: DialogComponent;

    config: DialogConfig = &lt;DialogConfig&gt;{
        title: <span class="hljs-string">'弹窗标题'</span>,
        content: <span class="hljs-string">'弹窗内容，告知当前状态、信息和解决方法，描述文字尽量控制在三行内'</span>,
        cancel: <span class="hljs-string">'辅助操作'</span>,
        confirm: <span class="hljs-string">'主操作'</span>
    };

    <span class="hljs-keyword">constructor</span>(<span class="hljs-params"><span class="hljs-keyword">private</span> asSrv: DialogService</span>) { }

    onShow(<span class="hljs-keyword">type</span>: SkinType, style: <span class="hljs-number">1</span> | <span class="hljs-number">2</span> | <span class="hljs-number">3</span>) {
        <span class="hljs-keyword">this</span>.config.skin = <span class="hljs-keyword">type</span>;
        <span class="hljs-keyword">this</span>.config.cancel = <span class="hljs-literal">null</span>;
        <span class="hljs-keyword">this</span>.config.confirm = <span class="hljs-literal">null</span>;
        <span class="hljs-keyword">this</span>.config.btns = <span class="hljs-literal">null</span>;
        <span class="hljs-keyword">this</span>.config.content = <span class="hljs-string">'弹窗内容，告知当前状态、信息和解决方法，描述文字尽量控制在三行内'</span>;
        <span class="hljs-keyword">switch</span> (style) {
            <span class="hljs-keyword">case</span> <span class="hljs-number">1</span>:
                <span class="hljs-keyword">this</span>.config.cancel = <span class="hljs-string">'辅助操作'</span>;
                <span class="hljs-keyword">this</span>.config.confirm = <span class="hljs-string">'主操作'</span>;
                <span class="hljs-keyword">break</span>;
            <span class="hljs-keyword">case</span> <span class="hljs-number">2</span>:
                <span class="hljs-keyword">this</span>.config.confirm = <span class="hljs-string">'主操作'</span>;
                <span class="hljs-keyword">break</span>;
            <span class="hljs-keyword">case</span> <span class="hljs-number">3</span>:
                <span class="hljs-keyword">this</span>.config.btns = [
                    { text: <span class="hljs-string">'否'</span>, <span class="hljs-keyword">type</span>: <span class="hljs-string">'default'</span>, value: <span class="hljs-number">1</span> },
                    { text: <span class="hljs-string">'不确定'</span>, <span class="hljs-keyword">type</span>: <span class="hljs-string">'default'</span>, value: <span class="hljs-number">2</span> },
                    { text: <span class="hljs-string">'是'</span>, <span class="hljs-keyword">type</span>: <span class="hljs-string">'primary'</span>, value: <span class="hljs-number">3</span> }
                ];
                <span class="hljs-keyword">break</span>;
        }
        <span class="hljs-keyword">this</span>.config = <span class="hljs-built_in">Object</span>.assign({}, <span class="hljs-keyword">this</span>.config);
        setTimeout(<span class="hljs-function"><span class="hljs-params">()</span> =&gt;</span> {
            <span class="hljs-function">(<span class="hljs-params">&lt;DialogComponent&gt;<span class="hljs-keyword">this</span>[`${<span class="hljs-keyword">type</span>}AS`]</span>).<span class="hljs-params">show</span><span class="hljs-params">()</span>.<span class="hljs-params">subscribe</span>(<span class="hljs-params">(<span class="hljs-params">res: <span class="hljs-built_in">any</span></span>) =&gt; {
                <span class="hljs-built_in">console</span>.log(<span class="hljs-params">'<span class="hljs-keyword">type</span>', res</span>);
            }</span>);
        }, 10);
    }

    <span class="hljs-params">onShowBySrv</span>(<span class="hljs-params"><span class="hljs-keyword">type</span>: SkinType, backdrop: <span class="hljs-built_in">boolean</span> = <span class="hljs-literal">true</span></span>) {
        <span class="hljs-params">this</span>.<span class="hljs-params">config</span>.<span class="hljs-params">skin</span> = <span class="hljs-params">type</span>;
        <span class="hljs-params">this</span>.<span class="hljs-params">config</span>.<span class="hljs-params">backdrop</span> = <span class="hljs-params">backdrop</span>;
        <span class="hljs-params">this</span>.<span class="hljs-params">config</span>.<span class="hljs-params">content</span> = '弹窗内容，告知当前状态、信息和解决方法，描述文字尽量控制在三行内';
        <span class="hljs-params">this</span>.<span class="hljs-params">asSrv</span>.<span class="hljs-params">show</span>(<span class="hljs-params"><span class="hljs-keyword">this</span>.config</span>).<span class="hljs-params">subscribe</span>(<span class="hljs-params">(<span class="hljs-params">res: <span class="hljs-built_in">any</span></span>) =&gt; {
            <span class="hljs-built_in">console</span>.log(<span class="hljs-params">res</span>);
        }</span>);
    }

    <span class="hljs-params">onShowOfHtml</span><span class="hljs-params">()</span> {
        <span class="hljs-params">this</span>.<span class="hljs-params">config</span>.<span class="hljs-params">content</span> = `
            &lt;<span class="hljs-params">p</span>&gt;这是一段<span class="hljs-params">HTML</span>&lt;<span class="hljs-params">strong</span>&gt;加粗&lt;/<span class="hljs-params">strong</span>&gt;&lt;/<span class="hljs-params">p</span>&gt;
            &lt;<span class="hljs-params">p</span>&gt;这是一段<span class="hljs-params">HTML</span>&lt;<span class="hljs-params">strong</span>&gt;加粗&lt;/<span class="hljs-params">strong</span>&gt;&lt;/<span class="hljs-params">p</span>&gt;
        `;
        <span class="hljs-params">this</span>.<span class="hljs-params">asSrv</span>.<span class="hljs-params">show</span>(<span class="hljs-params"><span class="hljs-keyword">this</span>.config</span>).<span class="hljs-params">subscribe</span>(<span class="hljs-params">(<span class="hljs-params">res: <span class="hljs-built_in">any</span></span>) =&gt; {
            <span class="hljs-built_in">console</span>.log(<span class="hljs-params">res</span>);
        }</span>);
    }

}
</span>