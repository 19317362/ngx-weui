<span class="hljs-keyword">import</span> { Component, ViewEncapsulation, ViewChild, OnDestroy } <span class="hljs-keyword">from</span> <span class="hljs-string">'@angular/core'</span>;
<span class="hljs-keyword">import</span> { Observable } <span class="hljs-keyword">from</span> <span class="hljs-string">'rxjs/Rx'</span>;

<span class="hljs-keyword">import</span> { SkinType } <span class="hljs-keyword">from</span> <span class="hljs-string">'ngx-weui'</span>;
<span class="hljs-keyword">import</span> { ActionSheetService, ActionSheetConfig, ActionSheetComponent } <span class="hljs-keyword">from</span> <span class="hljs-string">"ngx-weui/actionsheet"</span>;

<span class="hljs-meta">@Component</span>({
    selector: <span class="hljs-string">'example-actionsheet'</span>,
    templateUrl: <span class="hljs-string">'./actionsheet.component.html'</span>,
    styleUrls: [ <span class="hljs-string">'./actionsheet.component.scss'</span> ],
    encapsulation: ViewEncapsulation.None
})
<span class="hljs-keyword">export</span> <span class="hljs-keyword">class</span> DemoActionSheetComponent {

    <span class="hljs-meta">@ViewChild</span>(<span class="hljs-string">'ios'</span>) iosAS: ActionSheetComponent;
    <span class="hljs-meta">@ViewChild</span>(<span class="hljs-string">'android'</span>) androidAS: ActionSheetComponent;
    <span class="hljs-meta">@ViewChild</span>(<span class="hljs-string">'auto'</span>) autoAS: ActionSheetComponent;

    menus: <span class="hljs-built_in">any</span>[] = [
            { text: <span class="hljs-string">'菜单一'</span>, value: <span class="hljs-string">'test'</span>, other: <span class="hljs-number">1</span> },
            { text: <span class="hljs-string">'菜单三'</span>, value: <span class="hljs-string">'test'</span> }
        ];
    config: ActionSheetConfig = &lt;ActionSheetConfig&gt;{
        title: <span class="hljs-string">'这是一段标题'</span>
    };

    <span class="hljs-keyword">constructor</span>(<span class="hljs-params"><span class="hljs-keyword">private</span> srv: ActionSheetService</span>) { }

    onShow(<span class="hljs-keyword">type</span>: SkinType) {
        <span class="hljs-keyword">this</span>.config.skin = <span class="hljs-keyword">type</span>;
        <span class="hljs-keyword">this</span>.config = <span class="hljs-built_in">Object</span>.assign({}, <span class="hljs-keyword">this</span>.config);
        setTimeout(<span class="hljs-function"><span class="hljs-params">()</span> =&gt;</span> {
            <span class="hljs-function">(<span class="hljs-params">&lt;ActionSheetComponent&gt;<span class="hljs-keyword">this</span>[`${<span class="hljs-keyword">type</span>}AS`]</span>).<span class="hljs-params">show</span><span class="hljs-params">()</span>.<span class="hljs-params">subscribe</span>(<span class="hljs-params">(<span class="hljs-params">res: <span class="hljs-built_in">any</span></span>) =&gt; {
                <span class="hljs-built_in">console</span>.log(<span class="hljs-params">'<span class="hljs-keyword">type</span>', res</span>);
            }</span>);
        }, 10);
    }

    <span class="hljs-params">onShowBySrv</span>(<span class="hljs-params"><span class="hljs-keyword">type</span>: SkinType, backdrop: <span class="hljs-built_in">boolean</span> = <span class="hljs-literal">true</span></span>) {
        <span class="hljs-params">this</span>.<span class="hljs-params">config</span>.<span class="hljs-params">skin</span> = <span class="hljs-params">type</span>;
        <span class="hljs-params">this</span>.<span class="hljs-params">config</span>.<span class="hljs-params">backdrop</span> = <span class="hljs-params">backdrop</span>;
        <span class="hljs-params">this</span>.<span class="hljs-params">srv</span>.<span class="hljs-params">show</span>(<span class="hljs-params"><span class="hljs-keyword">this</span>.menus, <span class="hljs-keyword">this</span>.config</span>).<span class="hljs-params">subscribe</span>(<span class="hljs-params">(<span class="hljs-params">res: <span class="hljs-built_in">any</span></span>) =&gt; {
            <span class="hljs-built_in">console</span>.log(<span class="hljs-params">res</span>);
        }</span>);
    }

    <span class="hljs-params">ngOnDestroy</span><span class="hljs-params">()</span> {
        <span class="hljs-params">this</span>.<span class="hljs-params">srv</span>.<span class="hljs-params">destroyAll</span><span class="hljs-params">()</span>;
    }

}
</span>