<div class="docs-api"><h1>API reference for Angular WeUI uploader</h1><p class="module-import"><code>import { UploaderModule } from 'ngx-weui/uploader';</code></p><h2>Components & Directives</h2><h3 id="UploaderFileDirective"><code>UploaderFileDirective</code></h3><div class="directive-selectors"><span class="class-selector-label">selector:</span> <code class="class-selector-name">[weui-uploader-file]</code></div><h3 class="propertie-header">Properties</h3><table class="properties"><tr><th>Name</th><th style="width: 15%">Type</th><th>Default</th><th>Description</th></tr><tr><td><div class="input">[weui-uploader-file]</div></td><td><code></code></td><td></td><td><p>Uploader对象，必填项</p></td></tr><tr><td>element</td><td><code></code></td><td></td><td></td></tr><tr><td>_options</td><td><code></code></td><td></td><td></td></tr><tr><td>_isEmptyAfterSelection</td><td><code></code></td><td></td><td></td></tr></table><h3 class="method-header">Methods</h3><table class="methods"><thead><tr class="method-name"><th colspan="2">_onChange</th></tr></thead><tbody><tr class="method-description"><td colspan="2"></td></tr></tbody></table><h3 id="FileThumbDirective"><code>FileThumbDirective</code></h3><p></p><p>创建缩略图</p><p></p><div class="directive-selectors"><span class="class-selector-label">selector:</span> <code class="class-selector-name">[weui-thumb]</code></div><h3 class="propertie-header">Properties</h3><table class="properties"><tr><th>Name</th><th style="width: 15%">Type</th><th>Default</th><th>Description</th></tr><tr><td><div class="input">[weui-thumb]</div></td><td><code></code></td><td></td><td><p>文件对象，必填项</p></td></tr></table><h2>Services</h2><h3 id="UploaderConfig"><code>UploaderConfig</code></h3><p>可用于[<a href="https://github.com/cipchk/ngx-weui/blob/master/docs/config.md" target="_blank">全局配置</a>]。</p><h3 class="propertie-header">Properties</h3><table class="properties"><tr><th>Name</th><th style="width: 15%">Type</th><th>Default</th><th>Description</th></tr><tr><td>url</td><td><code></code></td><td></td><td><p>服务端网址</p></td></tr><tr><td>method</td><td><code></code></td><td></td><td><p>HTTP请求方式</p></td></tr><tr><td>alias</td><td><code></code></td><td>file</td><td><p>设置文件上传域的name</p></td></tr><tr><td>withCredentials</td><td><code></code></td><td>true</td><td><p>发送凭据</p></td></tr><tr><td>headers</td><td><code></code></td><td></td><td><p>headers 信息</p></td></tr><tr><td>auto</td><td><code></code></td><td>false</td><td><p>是否自动上传 设置为 true 后，不需要手动调用 <code>upload</code>，有文件选择即开始上传。</p></td></tr><tr><td>mimes</td><td><code></code></td><td></td><td><p>限定文件mime类型，例如：[ &#39;&#39; ]</p></td></tr><tr><td>types</td><td><code></code></td><td></td><td><p>限定文件类型，例如：[ &#39;jpg&#39;, &#39;png&#39; ]</p></td></tr><tr><td>limit</td><td><code></code></td><td>-1</td><td><p>允许最多上传数量 -1 表示不受限</p></td></tr><tr><td>size</td><td><code></code></td><td>-1</td><td><p>限定文件大小（单位：字节） -1 表示不受限</p></td></tr></table><h2>Additional classes</h2><h3 id="FileItem"><code>FileItem</code></h3><p></p><p>文件对象</p><p></p><h3 class="propertie-header">Properties</h3><table class="properties"><tr><th>Name</th><th style="width: 15%">Type</th><th>Default</th><th>Description</th></tr><tr><td>id</td><td><code></code></td><td></td><td><p>文件ID，每个对象具有唯一ID，与文件名无关</p></td></tr><tr><td>file</td><td><code></code></td><td></td><td><p>重建文件结构对象</p></td></tr><tr><td>_file</td><td><code></code></td><td></td><td><p>原生对象</p></td></tr><tr><td>index</td><td><code></code></td><td></td><td><p>索引</p></td></tr><tr><td>progress</td><td><code></code></td><td></td><td><p>上传进度</p></td></tr><tr><td>isReady</td><td><code></code></td><td></td><td><p>准备上传就绪</p></td></tr><tr><td>isUploading</td><td><code></code></td><td></td><td><p>上传中</p></td></tr><tr><td>isUploaded</td><td><code></code></td><td></td><td><p>已上传（不管错误与否都是true）</p></td></tr><tr><td>isSuccess</td><td><code></code></td><td></td><td><p>上传成功</p></td></tr><tr><td>isCancel</td><td><code></code></td><td></td><td><p>用户取消上传</p></td></tr><tr><td>isError</td><td><code></code></td><td></td><td><p>上传失败</p></td></tr><tr><td>_xhr</td><td><code></code></td><td></td><td><p>HTTP请求对象</p></td></tr><tr><td>options</td><td><code></code></td><td></td><td><p>上传配置信息</p></td></tr></table><h3 class="method-header">Methods</h3><table class="methods"><thead><tr class="method-name"><th colspan="2">upload</th></tr></thead><tbody><tr class="method-description"><td colspan="2"><p>上传</p></td></tr></tbody></table><table class="methods"><thead><tr class="method-name"><th colspan="2">cancel</th></tr></thead><tbody><tr class="method-description"><td colspan="2"><p>取消上传</p></td></tr></tbody></table><table class="methods"><thead><tr class="method-name"><th colspan="2">remove</th></tr></thead><tbody><tr class="method-description"><td colspan="2"><p>从队列中移除，当文件正在上传中时会先取消</p></td></tr></tbody></table><table class="methods"><thead><tr class="method-name"><th colspan="2">_prepareToUploading</th></tr></thead><tbody><tr class="method-description"><td colspan="2"></td></tr></tbody></table><table class="methods"><thead><tr class="method-name"><th colspan="2">_onBeforeUpload</th></tr></thead><tbody><tr class="method-description"><td colspan="2"></td></tr></tbody></table><table class="methods"><thead><tr class="method-name"><th colspan="2">_onProgress</th></tr></thead><tbody><tr class="method-description"><td colspan="2"></td></tr></tbody><thead><tr class="method-parameters"><th colspan="2">Parameters</th></tr></thead><tbody><tr class="method-parameter"><td><p class="method-parameter-name">progress</p><code class="method-parameter-type">number</code></td><td class="parameter-description"></td></tr></tbody></table><table class="methods"><thead><tr class="method-name"><th colspan="2">_onSuccess</th></tr></thead><tbody><tr class="method-description"><td colspan="2"></td></tr></tbody><thead><tr class="method-parameters"><th colspan="2">Parameters</th></tr></thead><tbody><tr class="method-parameter"><td><p class="method-parameter-name">response</p><code class="method-parameter-type">string</code></td><td class="parameter-description"></td></tr><tr class="method-parameter"><td><p class="method-parameter-name">status</p><code class="method-parameter-type">number</code></td><td class="parameter-description"></td></tr><tr class="method-parameter"><td><p class="method-parameter-name">headers</p><code class="method-parameter-type">ParsedResponseHeaders</code></td><td class="parameter-description"></td></tr></tbody></table><table class="methods"><thead><tr class="method-name"><th colspan="2">_onError</th></tr></thead><tbody><tr class="method-description"><td colspan="2"></td></tr></tbody><thead><tr class="method-parameters"><th colspan="2">Parameters</th></tr></thead><tbody><tr class="method-parameter"><td><p class="method-parameter-name">response</p><code class="method-parameter-type">string</code></td><td class="parameter-description"></td></tr><tr class="method-parameter"><td><p class="method-parameter-name">status</p><code class="method-parameter-type">number</code></td><td class="parameter-description"></td></tr><tr class="method-parameter"><td><p class="method-parameter-name">headers</p><code class="method-parameter-type">ParsedResponseHeaders</code></td><td class="parameter-description"></td></tr></tbody></table><table class="methods"><thead><tr class="method-name"><th colspan="2">_onComplete</th></tr></thead><tbody><tr class="method-description"><td colspan="2"></td></tr></tbody><thead><tr class="method-parameters"><th colspan="2">Parameters</th></tr></thead><tbody><tr class="method-parameter"><td><p class="method-parameter-name">response</p><code class="method-parameter-type">string</code></td><td class="parameter-description"></td></tr><tr class="method-parameter"><td><p class="method-parameter-name">status</p><code class="method-parameter-type">number</code></td><td class="parameter-description"></td></tr><tr class="method-parameter"><td><p class="method-parameter-name">headers</p><code class="method-parameter-type">ParsedResponseHeaders</code></td><td class="parameter-description"></td></tr></tbody></table><table class="methods"><thead><tr class="method-name"><th colspan="2">_onCancel</th></tr></thead><tbody><tr class="method-description"><td colspan="2"></td></tr></tbody><thead><tr class="method-parameters"><th colspan="2">Parameters</th></tr></thead><tbody><tr class="method-parameter"><td><p class="method-parameter-name">response</p><code class="method-parameter-type">string</code></td><td class="parameter-description"></td></tr><tr class="method-parameter"><td><p class="method-parameter-name">status</p><code class="method-parameter-type">number</code></td><td class="parameter-description"></td></tr><tr class="method-parameter"><td><p class="method-parameter-name">headers</p><code class="method-parameter-type">ParsedResponseHeaders</code></td><td class="parameter-description"></td></tr></tbody></table><h3 id="Uploader"><code>Uploader</code></h3><p></p><p>内置HTML5上传组件</p><p></p><h3 class="propertie-header">Properties</h3><table class="properties"><tr><th>Name</th><th style="width: 15%">Type</th><th>Default</th><th>Description</th></tr><tr><td>options</td><td><code></code></td><td></td><td><p>获取当前上传组件配置项</p></td></tr><tr><td>queue</td><td><code></code></td><td></td><td><p>获取队列中所有文件对象</p></td></tr><tr><td>progress</td><td><code></code></td><td></td><td><p>获取当前总进度</p></td></tr><tr><td>isUploading</td><td><code></code></td><td></td><td><p>是否上传中</p></td></tr><tr><td>notUploadedCount</td><td><code></code></td><td></td><td><p>获取未上传数量</p></td></tr><tr><td>uploadedCount</td><td><code></code></td><td></td><td><p>获取已上传数量</p></td></tr><tr><td>getReadyItems</td><td><code></code></td><td></td><td><p>获取待上传文件</p></td></tr></table><h3 class="method-header">Methods</h3><table class="methods"><thead><tr class="method-name"><th colspan="2">_getNextIndex</th></tr></thead><tbody><tr class="method-description"><td colspan="2"></td></tr></tbody></table><table class="methods"><thead><tr class="method-name"><th colspan="2">setOptions</th></tr></thead><tbody><tr class="method-description"><td colspan="2"><p>重置选项</p></td></tr></tbody><thead><tr class="method-parameters"><th colspan="2">Parameters</th></tr></thead><tbody><tr class="method-parameter"><td><p class="method-parameter-name">options</p><code class="method-parameter-type">UploaderOptions</code></td><td class="parameter-description"></td></tr><tr class="method-parameter"><td><p class="method-parameter-name">includeOldQueue</p><code class="method-parameter-type">boolean = true</code></td><td class="parameter-description"><p>是否包括已存在队列中的文件</p></td></tr></tbody></table><table class="methods"><thead><tr class="method-name"><th colspan="2">addToQueue</th></tr></thead><tbody><tr class="method-description"><td colspan="2"><p>将文件放入队列中</p></td></tr></tbody><thead><tr class="method-parameters"><th colspan="2">Parameters</th></tr></thead><tbody><tr class="method-parameter"><td><p class="method-parameter-name">files</p><code class="method-parameter-type">File[]</code></td><td class="parameter-description"></td></tr><tr class="method-parameter"><td><p class="method-parameter-name">options<span class="optional">?</span></p><code class="method-parameter-type">UploaderOptions</code></td><td class="parameter-description"></td></tr><tr class="method-parameter"><td><p class="method-parameter-name">filters<span class="optional">?</span></p><code class="method-parameter-type">FilterFunction[] | string</code></td><td class="parameter-description"></td></tr></tbody></table><table class="methods"><thead><tr class="method-name"><th colspan="2">removeFromQueue</th></tr></thead><tbody><tr class="method-description"><td colspan="2"><p>从队列中移除一个文件</p></td></tr></tbody><thead><tr class="method-parameters"><th colspan="2">Parameters</th></tr></thead><tbody><tr class="method-parameter"><td><p class="method-parameter-name">value</p><code class="method-parameter-type">FileItem | Number</code></td><td class="parameter-description"><p>FileItem对象或下标</p></td></tr></tbody></table><table class="methods"><thead><tr class="method-name"><th colspan="2">clearQueue</th></tr></thead><tbody><tr class="method-description"><td colspan="2"><p>清空队列</p></td></tr></tbody></table><table class="methods"><thead><tr class="method-name"><th colspan="2">uploadItem</th></tr></thead><tbody><tr class="method-description"><td colspan="2"><p>上传某个文件</p></td></tr></tbody><thead><tr class="method-parameters"><th colspan="2">Parameters</th></tr></thead><tbody><tr class="method-parameter"><td><p class="method-parameter-name">value</p><code class="method-parameter-type">FileItem</code></td><td class="parameter-description"></td></tr></tbody></table><table class="methods"><thead><tr class="method-name"><th colspan="2">cancelItem</th></tr></thead><tbody><tr class="method-description"><td colspan="2"><p>取消某个文件</p></td></tr></tbody><thead><tr class="method-parameters"><th colspan="2">Parameters</th></tr></thead><tbody><tr class="method-parameter"><td><p class="method-parameter-name">value</p><code class="method-parameter-type">FileItem</code></td><td class="parameter-description"></td></tr></tbody></table><table class="methods"><thead><tr class="method-name"><th colspan="2">uploadAll</th></tr></thead><tbody><tr class="method-description"><td colspan="2"><p>上传队列中所有未上传的文件</p></td></tr></tbody></table><table class="methods"><thead><tr class="method-name"><th colspan="2">cancelAll</th></tr></thead><tbody><tr class="method-description"><td colspan="2"><p>取消所有上传中文件</p></td></tr></tbody></table><table class="methods"><thead><tr class="method-name"><th colspan="2">_destroy</th></tr></thead><tbody><tr class="method-description"><td colspan="2"></td></tr></tbody></table><table class="methods"><thead><tr class="method-name"><th colspan="2">_onErrorItem</th></tr></thead><tbody><tr class="method-description"><td colspan="2"></td></tr></tbody><thead><tr class="method-parameters"><th colspan="2">Parameters</th></tr></thead><tbody><tr class="method-parameter"><td><p class="method-parameter-name">item</p><code class="method-parameter-type">FileItem</code></td><td class="parameter-description"></td></tr><tr class="method-parameter"><td><p class="method-parameter-name">response</p><code class="method-parameter-type">string</code></td><td class="parameter-description"></td></tr><tr class="method-parameter"><td><p class="method-parameter-name">status</p><code class="method-parameter-type">number</code></td><td class="parameter-description"></td></tr><tr class="method-parameter"><td><p class="method-parameter-name">headers</p><code class="method-parameter-type">ParsedResponseHeaders</code></td><td class="parameter-description"></td></tr></tbody></table><table class="methods"><thead><tr class="method-name"><th colspan="2">_onCompleteItem</th></tr></thead><tbody><tr class="method-description"><td colspan="2"></td></tr></tbody><thead><tr class="method-parameters"><th colspan="2">Parameters</th></tr></thead><tbody><tr class="method-parameter"><td><p class="method-parameter-name">item</p><code class="method-parameter-type">FileItem</code></td><td class="parameter-description"></td></tr><tr class="method-parameter"><td><p class="method-parameter-name">response</p><code class="method-parameter-type">string</code></td><td class="parameter-description"></td></tr><tr class="method-parameter"><td><p class="method-parameter-name">status</p><code class="method-parameter-type">number</code></td><td class="parameter-description"></td></tr><tr class="method-parameter"><td><p class="method-parameter-name">headers</p><code class="method-parameter-type">ParsedResponseHeaders</code></td><td class="parameter-description"></td></tr></tbody></table><h2>Interface classes</h2><h3 id="UploaderHeaders"><code>UploaderHeaders</code></h3><p></p><p>组件Header对象接口</p><p></p><h3 class="propertie-header">Properties</h3><table class="properties"><tr><th>Name</th><th style="width: 15%">Type</th><th>Default</th><th>Description</th></tr><tr><td>name</td><td><code></code></td><td></td><td></td></tr><tr><td>value</td><td><code></code></td><td></td><td></td></tr></table><h3 id="UploaderOptions"><code>UploaderOptions</code></h3><p></p><p>组件配置项对象接口</p><p></p><h3 class="propertie-header">Properties</h3><table class="properties"><tr><th>Name</th><th style="width: 15%">Type</th><th>Default</th><th>Description</th></tr><tr><td>url</td><td><code></code></td><td></td><td><p>服务端网址</p></td></tr><tr><td>method</td><td><code></code></td><td>POST</td><td><p>HTTP请求方式</p></td></tr><tr><td>alias</td><td><code></code></td><td>file</td><td><p>设置文件上传域的name</p></td></tr><tr><td>withCredentials</td><td><code></code></td><td>true</td><td><p>是否发送凭据</p></td></tr><tr><td>headers</td><td><code></code></td><td></td><td><p>headers 信息</p></td></tr><tr><td>params</td><td><code></code></td><td></td><td><p>HTTP提交其他参数</p></td></tr><tr><td>filters</td><td><code></code></td><td></td><td><p>过滤器</p></td></tr><tr><td>auto</td><td><code></code></td><td>false</td><td><p>是否自动上传 设置为 true 后，不需要手动调用 <code>upload</code>，有文件选择即开始上传。</p></td></tr><tr><td>mimes</td><td><code></code></td><td></td><td><p>限定文件mime类型，例如：[ &#39;&#39; ]</p></td></tr><tr><td>types</td><td><code></code></td><td></td><td><p>限定文件类型，例如：[ &#39;jpg&#39;, &#39;png&#39; ]</p></td></tr><tr><td>limit</td><td><code></code></td><td>-1</td><td><p>允许最多上传数量 -1 表示不受限</p></td></tr><tr><td>size</td><td><code></code></td><td>-1</td><td><p>限定文件大小（单位：字节） -1 表示不受限</p></td></tr><tr><td>removeAfterUpload</td><td><code></code></td><td>false</td><td><p>是否自动移除上传成功文件</p></td></tr><tr><td>disableMultipart</td><td><code></code></td><td>false</td><td><p>禁止使用multipart/form-data</p></td></tr><tr><td>onFileQueued</td><td><code></code></td><td></td><td><p>当文件被加入队列以后触发</p></td></tr><tr><td>onFileDequeued</td><td><code></code></td><td></td><td><p>当文件被移除队列后触发</p></td></tr><tr><td>onStart</td><td><code></code></td><td></td><td><p>当开始上传流程时触发。</p></td></tr><tr><td>onCancel</td><td><code></code></td><td></td><td><p>当开始上传流程取消时触发。</p></td></tr><tr><td>onFinished</td><td><code></code></td><td></td><td><p>当所有文件上传结束时触发</p></td></tr><tr><td>onUploadStart</td><td><code></code></td><td></td><td><p>某个文件开始上传前触发，一个文件只会触发一次。</p></td></tr><tr><td>onUploadProgress</td><td><code></code></td><td></td><td><p>上传过程中触发，携带总的上传进度，以及当前文件的上传进度</p></td></tr><tr><td>onUploadSuccess</td><td><code></code></td><td></td><td><p>当文件上传成功时触发</p></td></tr><tr><td>onUploadError</td><td><code></code></td><td></td><td><p>当文件上传出错时触发</p></td></tr><tr><td>onUploadComplete</td><td><code></code></td><td></td><td><p>不管成功或者失败，文件上传完成时触发</p></td></tr><tr><td>onUploadCancel</td><td><code></code></td><td></td><td><p>取消某文件时触发</p></td></tr><tr><td>onError</td><td><code></code></td><td></td><td><p>当filters不通过时触发</p></td></tr></table><h3 class="method-header">Methods</h3><table class="methods"><thead><tr class="method-name"><th colspan="2">uploadTransport</th></tr></thead><tbody><tr class="method-description"><td colspan="2"><p>内置的上传组件是基于HTML5 如有特殊需求可以自定义上传接口（Observable<any>中的 any 指的是事件当中的response） 不管成功与否都会触发 onUploadComplete &amp; onUploadSuccess</any></p></td></tr></tbody><thead><tr class="method-parameters"><th colspan="2">Parameters</th></tr></thead><tbody><tr class="method-parameter"><td><p class="method-parameter-name">item</p><code class="method-parameter-type">FileItem</code></td><td class="parameter-description"></td></tr></tbody></table><table class="methods"><thead><tr class="method-name"><th colspan="2">abortTransport</th></tr></thead><tbody><tr class="method-description"><td colspan="2"><p>自定义上传接口，当用户中止时回调</p></td></tr></tbody><thead><tr class="method-parameters"><th colspan="2">Parameters</th></tr></thead><tbody><tr class="method-parameter"><td><p class="method-parameter-name">item</p><code class="method-parameter-type">FileItem</code></td><td class="parameter-description"></td></tr></tbody></table></div>